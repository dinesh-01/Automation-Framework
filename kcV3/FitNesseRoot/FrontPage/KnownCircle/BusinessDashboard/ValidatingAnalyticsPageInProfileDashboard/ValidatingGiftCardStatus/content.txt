!define businessLoginEmail {kctestk3@gmail.com}
!include -c .FrontPage.KnownCircle.LoginHeaderVariable
!include -c .FrontPage.KnownCircle.BusinessDashboard.ValidateDigitalSolutionPageInBusinessDashboard.CommonGiftCardProcess

!|Script|Selenium|
|closeBrowser;|

!** Checking Status of the gift card
!include -c .FrontPage.KnownCircle.LoginHeaderVariable
!|Script|Selenium|
|launchBrowser;|${mainURLCanary}business/dashboard/analytics|
|click;|a[href='#giftCardStatus']|cssselector|
|$status1=|getText;|//*[@id="giftCardStatus"]/div/form/ul[2]/li[1]/span[3]/span[2]|xpath|

!|Script|Common|
|check|checkIfStringAreEqualIgnoreCase;|$status1|Pending|true|
*!

!** Check for Email delivary
!|Script|Mail|
|wait;|10|
|mailConfig;|${gImap}|${adminMail}|${adminPassword}|
|$body=|getBody;|
|closeMail;|
*!

!|Script|Common|
|$url=|getSubStringByString;|$body|a href="|" data-reactid="|

!|Script|Selenium|
|initialize;|${browser}|${locale}|
|launchBrowser;|$url|
|$profileOwnnerlink=|currentUrl;|
|click;|AmazoncomGiftCardCustom|id|
|click;|joinMe|id|
|click;|claimNow|id|
|waitForElementToBeDisplayed;|.react-modal.kc-modal.claimSuccess|cssselector|60|
|closeBrowser;|


!include -c .FrontPage.KnownCircle.LoginHeaderVariable

!** Checking Status of the gift card
!|Script|Selenium|
|navigateToUrl;|${mainURLCanary}business/dashboard/analytics|
|click;|a[href='#giftCardStatus']|cssselector|
|$status2=|getText;|//*[@id="giftCardStatus"]/div/form/ul[2]/li[1]/span[3]/span[2]|xpath|
|closeBrowser;|

!|Script|Common|
|check|checkIfStringAreEqualIgnoreCase;|$status2|Claimed|true|
*!